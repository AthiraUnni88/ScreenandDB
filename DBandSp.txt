USE [CRUDOPERATION]
GO
/****** Object:  Table [dbo].[CRUD_OPERATION_TABLE]    Script Date: 25-07-2024 18:03:21 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CRUD_OPERATION_TABLE](
	[EMPLOYEE_ID] [int] IDENTITY(1,1) NOT NULL,
	[EMPLOYEE_NAME] [nvarchar](100) NULL,
	[DESIGNATION] [nvarchar](100) NULL,
	[POST] [nvarchar](100) NULL,
	[PLACE] [nvarchar](100) NULL,
	[PHONE] [nvarchar](15) NULL,
PRIMARY KEY CLUSTERED 
(
	[EMPLOYEE_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  StoredProcedure [dbo].[CRUD_OPERATION_PROCEDURE]    Script Date: 25-07-2024 18:03:21 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[CRUD_OPERATION_PROCEDURE]
     @Flag INT,
	 @EMPLOYEE_NAME NVARCHAR(100) =NULL,
    @DESIGNATION NVARCHAR(100) = NULL,
    @POST NVARCHAR(100) = NULL,
    @PLACE NVARCHAR(100) = NULL,
    @PHONE NVARCHAR(20) = NULL,
	 @EMPLOYEE_ID INT = NULL
AS
BEGIN
    IF @Flag = 1
    BEGIN
      select * from dbo.CRUD_OPERATION_TABLE;
    END
	  ELSE IF @Flag = 2
    BEGIN
        INSERT INTO dbo.CRUD_OPERATION_TABLE(EMPLOYEE_NAME, DESIGNATION, POST, PLACE, PHONE)
        VALUES (@EMPLOYEE_NAME, @DESIGNATION, @POST, @PLACE, @PHONE);
        
        SELECT @@ROWCOUNT AS RowsAffected;
    END

	   ELSE IF @Flag = 3
    BEGIN
        DELETE FROM dbo.CRUD_OPERATION_TABLE
        WHERE EMPLOYEE_ID = @EMPLOYEE_ID;

        SELECT @@ROWCOUNT AS RowsAffected;
    END


	  ELSE IF @Flag = 4
    BEGIN
        UPDATE dbo.CRUD_OPERATION_TABLE
        SET EMPLOYEE_NAME = @EMPLOYEE_NAME,
            DESIGNATION = @DESIGNATION,
            POST = @POST,
            PLACE = @PLACE,
            PHONE = @PHONE
        WHERE EMPLOYEE_ID = @EMPLOYEE_ID;

        SELECT @@ROWCOUNT AS RowsAffected;
    END


    ELSE
    BEGIN
        -- Default query
        SELECT * FROM dbo.CRUD_OPERATION_TABLE;
    END
END
GO
